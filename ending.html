<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>War</title>
</head>
<body>
    <div class="container">
        <div class="header">

        </div>
        <div class="main">
            <div class="text-area" style="color: wheat;">
                <p id="moneyspangame"></p>
                <p id="playerhp"></p>
                <p id="magazine"></p>
                <p id="message"></p>
                <p id="msglevel"></p>
                <p id="msgtargetkills"></p>
            </div>
            <video autoplay controls>
                <source src="../assets/vid/ending.mp4" type="video/mp4" width="800" height="400">
                Your browser does not support the video tag.
            </video>
            <!-- <div class="analog">
                <div class="move-analog">
                    <button>X</button>
                    <button>U</button>
                    <button>X</button>
                    <button>L</button>
                    <button>X</button>
                    <button>R</button>
                    <button>X</button>
                    <button>D</button>
                    <button>X</button>
                </div>
                <div class="weapon-analog">
                    <button>X</button>
                    <button>U</button>
                    <button>X</button>
                    <button>L</button>
                    <button>X</button>
                    <button>R</button>
                    <button>X</button>
                    <button>D</button>
                    <button>X</button>
                </div>
                
            </div> -->
            <div class="input-area">
                <button id="startbtn">BACK To Home</button>
                <button id="restartbtn">x</button>
            </div>
        </div>

        </div>
    </div>
    <div class="blocker">
        <h6>Mohon Maaf game ini hanya bisa <p></p>di mainkan di pc / laptop saja</h6>
    </div>
    <script>
        // List of resource URLs
        const resources = [
            { type: 'img', url: 'bgmenu.png' },
            { type: 'img', url: 'bg1.png' },
            { type: 'img', url: 'bg2.png' },
            { type: 'img', url: 'bg3.png' },
            { type: 'img', url: 'bg4.png' },
            { type: 'img', url: 'overbg1.png' },
            { type: 'img', url: 'overbg2.png' },
            { type: 'img', url: 'overbg3.png' },
            { type: 'img', url: 'overbg4.png' },
            { type: 'img', url: 'player.png' },
            { type: 'img', url: 'enemy.png' },
            { type: 'bgm', url: 'amparpisang.mp3' },
            { type: 'bgm', url: 'apuse.mp3' },
            { type: 'bgm', url: 'flobamora.mp3' },
            { type: 'bgm', url: 'ibupertiwi.mp3' },
            { type: 'bgm', url: 'indonesiapusaka.mp3' },
            { type: 'bgm', url: 'kerosene.mp3' },
            { type: 'bgm', url: 'kincir.mp3' },
            { type: 'bgm', url: 'lathi.mp3' },
            { type: 'bgm', url: 'yamko.mp3' },
            { type: 'sfx', url: 'coinpick.wav' },
            { type: 'sfx', url: 'enemydeath.wav' },
            { type: 'sfx', url: 'fail.mp3' },
            { type: 'sfx', url: 'fire (2).mp3' },
            { type: 'sfx', url: 'fire.mp3' },
            { type: 'sfx', url: 'hit.wav' },
            { type: 'sfx', url: 'win.mp3' },
            { type: 'vid', url: 'ending.mp4' },
        ];
    
        function allResourcesLoaded() {
            console.log("run this");
          const allElements = resources.map(url => {
            if (url.endsWith('.png')) {
              const img = new Image();
              img.src = url;
              return img;
            } else if (url.endsWith('.mp3') || url.endsWith('.wav')) {
              const audio = new Audio();
              audio.src = url;
              return audio;
            }else if (resource.url.endsWith('.mp4') || resource.url.endsWith('.webm') || resource.url.endsWith('.ogg')) {
                    const video = document.createElement('video');
                    video.src = resource.url;
                    return video;
                }
                return null;
            });

            return allElements.every(element => element.complete);
        }

        // Wait for the page to load
        window.onload = function () {
            if (!allResourcesLoaded()) {
                // Redirect to loading.html if not all resources are loaded
                window.location.href = 'loading.html';
            } else {
                console.log("all loaded", allResourcesLoaded());
            }
        };
    </script>
    <script>
        function playVideo() {
            const video = document.querySelector('video');
            video.play();
        }
    </script>
    <script src="ending.js"></script>
</body>
</html>